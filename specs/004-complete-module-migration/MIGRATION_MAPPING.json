[
  {
    "function_name": "_normalize_letters_sequence",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/layout.py",
    "category": "production",
    "call_count": 4,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_plan_letter_images",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/utils.py",
    "category": "production",
    "call_count": 5,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": "Refactored into 3 layers (infrastructure + domain + orchestration). Kept as thin wrapper in utils.py for backward compatibility. Will be deprecated in v2.0."
  },
  {
    "function_name": "_letter_asset_filename",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/layout.py",
    "category": "production",
    "call_count": 4,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_letters_missing_names",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/layout.py",
    "category": "production",
    "call_count": 4,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_layout_zhuyin_column",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/layout.py",
    "category": "production",
    "call_count": 7,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_progress_bar_band_layout",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/effects.py",
    "category": "production",
    "call_count": 6,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_progress_bar_base_arrays",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/effects.py",
    "category": "production",
    "call_count": 4,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_make_progress_bar_mask",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/effects.py",
    "category": "production",
    "call_count": 4,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_build_progress_bar_segments",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/effects.py",
    "category": "production",
    "call_count": 8,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_apply_fadeout",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/effects.py",
    "category": "production",
    "call_count": 17,
    "wrapper_needed": false,
    "migration_priority": "high",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_apply_fadein",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/effects.py",
    "category": "production",
    "call_count": 14,
    "wrapper_needed": false,
    "migration_priority": "high",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_coerce_non_negative_float",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/timing.py",
    "category": "production",
    "call_count": 4,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_coerce_bool",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/timing.py",
    "category": "production",
    "call_count": 18,
    "wrapper_needed": false,
    "migration_priority": "high",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_make_text_imageclip",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/infrastructure/rendering/pillow_adapter.py",
    "category": "production",
    "call_count": 50,
    "wrapper_needed": false,
    "migration_priority": "high",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_measure_text_with_pil",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/infrastructure/rendering/pillow_adapter.py",
    "category": "production",
    "call_count": 22,
    "wrapper_needed": false,
    "migration_priority": "high",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_find_system_font",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/infrastructure/rendering/pillow_adapter.py",
    "category": "production",
    "call_count": 11,
    "wrapper_needed": false,
    "migration_priority": "high",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_make_fixed_letter_clip",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/infrastructure/video/moviepy_adapter.py",
    "category": "production",
    "call_count": 2,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_ensure_dimensions",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/infrastructure/video/moviepy_adapter.py",
    "category": "production",
    "call_count": 10,
    "wrapper_needed": false,
    "migration_priority": "high",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_ensure_fullscreen_cover",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/infrastructure/video/moviepy_adapter.py",
    "category": "production",
    "call_count": 4,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_auto_letterbox_crop",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/infrastructure/video/moviepy_adapter.py",
    "category": "production",
    "call_count": 4,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_create_placeholder_mp4_with_ffmpeg",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/infrastructure/video/moviepy_adapter.py",
    "category": "production",
    "call_count": 9,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_probe_media_duration",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/infrastructure/media/ffmpeg_wrapper.py",
    "category": "production",
    "call_count": 6,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_find_and_set_ffmpeg",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/infrastructure/media/ffmpeg_wrapper.py",
    "category": "production",
    "call_count": 5,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "make_beep",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/infrastructure/media/audio.py",
    "category": "production",
    "call_count": 4,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "synthesize_beeps",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/infrastructure/media/audio.py",
    "category": "production",
    "call_count": 5,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_resolve_entry_video_path",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/application/video_service.py",
    "category": "production",
    "call_count": 4,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_is_entry_enabled",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/application/video_service.py",
    "category": "production",
    "call_count": 4,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_prepare_entry_context",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/application/video_service.py",
    "category": "production",
    "call_count": 6,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_resolve_ending_video_path",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/application/video_service.py",
    "category": "production",
    "call_count": 4,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_is_ending_enabled",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/application/video_service.py",
    "category": "production",
    "call_count": 4,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_prepare_ending_context",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/application/video_service.py",
    "category": "production",
    "call_count": 6,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_resolve_letter_asset_dir",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/application/video_service.py",
    "category": "production",
    "call_count": 8,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_prepare_letters_context",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/application/video_service.py",
    "category": "production",
    "call_count": 12,
    "wrapper_needed": false,
    "migration_priority": "high",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "_log_missing_letter_assets",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/application/video_service.py",
    "category": "production",
    "call_count": 6,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "render_video_moviepy",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/application/video_service.py",
    "category": "production",
    "call_count": 24,
    "wrapper_needed": false,
    "migration_priority": "high",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "render_video_stub",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/application/video_service.py",
    "category": "production",
    "call_count": 28,
    "wrapper_needed": false,
    "migration_priority": "high",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "concatenate_videos_with_transitions",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/application/video_service.py",
    "category": "production",
    "call_count": 14,
    "wrapper_needed": false,
    "migration_priority": "high",
    "dependencies": [],
    "notes": ""
  },
  {
    "function_name": "check_assets",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/application/resource_checker.py",
    "category": "production",
    "call_count": 0,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": "Pending migration to Application layer"
  },
  {
    "function_name": "compute_layout_bboxes",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/layout.py",
    "category": "production",
    "call_count": 0,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": "Pending migration to Domain layer"
  },
  {
    "function_name": "load_json",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/shared/validation.py",
    "category": "production",
    "call_count": 0,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": "Pending migration to Shared layer"
  },
  {
    "function_name": "validate_schema",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/shared/validation.py",
    "category": "production",
    "call_count": 0,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": "Pending migration to Shared layer"
  },
  {
    "function_name": "_zhuyin_main_gap",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/typography.py",
    "category": "production",
    "call_count": 0,
    "wrapper_needed": false,
    "migration_priority": "low",
    "dependencies": [],
    "notes": "Pending migration to Domain layer"
  },
  {
    "function_name": "zhuyin_for",
    "old_location": "spellvid/utils.py",
    "new_location": "spellvid/domain/typography.py",
    "category": "production",
    "call_count": 0,
    "wrapper_needed": false,
    "migration_priority": "medium",
    "dependencies": [],
    "notes": "Pending migration to Domain layer"
  },
  {
    "function_name": "__init__",
    "old_location": "N/A",
    "new_location": "N/A",
    "category": "production",
    "call_count": 0,
    "wrapper_needed": false,
    "migration_priority": "none",
    "dependencies": [],
    "notes": "False positive from usage scanner - Python special method, not a migration target"
  },
  {
    "function_name": "duration",
    "old_location": "N/A",
    "new_location": "N/A",
    "category": "production",
    "call_count": 0,
    "wrapper_needed": false,
    "migration_priority": "none",
    "dependencies": [],
    "notes": "False positive from usage scanner - scanned from variable names like FADE_OUT_DURATION"
  },
  {
    "function_name": "get_frame",
    "old_location": "N/A",
    "new_location": "N/A",
    "category": "production",
    "call_count": 0,
    "wrapper_needed": false,
    "migration_priority": "none",
    "dependencies": [],
    "notes": "False positive from usage scanner - MoviePy internal method, not defined in utils.py"
  },
  {
    "function_name": "make_frame",
    "old_location": "N/A",
    "new_location": "N/A",
    "category": "production",
    "call_count": 0,
    "wrapper_needed": false,
    "migration_priority": "none",
    "dependencies": [],
    "notes": "False positive from usage scanner - MoviePy internal method, not defined in utils.py"
  },
  {
    "function_name": "with_duration",
    "old_location": "N/A",
    "new_location": "N/A",
    "category": "production",
    "call_count": 0,
    "wrapper_needed": false,
    "migration_priority": "none",
    "dependencies": [],
    "notes": "False positive from usage scanner - MoviePy method, not defined in utils.py"
  }
]