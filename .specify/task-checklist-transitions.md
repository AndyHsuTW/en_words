# 影片轉場效果 - 任務檢查清單

**快速參考版本** - 完整計畫請見 `implementation-plan-transitions.md`

---

## 📅 Phase 1: 核心功能（Day 1-3）

### 開發任務
- [ ] **1.1** 新增常數 `FADE_OUT_DURATION`, `FADE_IN_DURATION` 於 `utils.py` (0.5h)
- [ ] **1.2** 實作 `_apply_fadeout()` 函式 (1-2h)
- [ ] **1.3** 實作 `_apply_fadein()` 函式 (1h)
- [ ] **1.4** 修改 `render_video_moviepy()` 整合淡出 (2-3h)
- [ ] **1.5** 建立單元測試 `tests/test_transition_fadeout.py` (2-3h)

### 測試驗證
- [ ] 單元測試全部通過
- [ ] 手動測試：單一影片有 3 秒淡出
- [ ] 手動測試：音訊與畫面同步淡出

**完成標準**: 所有影片統一應用 3 秒淡出

---

## 📅 Phase 2: 批次整合（Day 4-5）

### 開發任務
- [ ] **2.1** 分析批次模式現有架構 (1-2h)
- [ ] **2.2** 實作 `concatenate_videos_with_transitions()` (3-4h)
- [ ] **2.3** 更新 `cli.py` 增加 `--out-file` 參數與邏輯 (2-3h)
- [ ] **2.4** 建立整合測試 `tests/test_transition_integration.py` (3-4h)

### 測試驗證
- [ ] 整合測試全部通過
- [ ] 手動測試：批次合併 2 個影片成功
- [ ] 手動測試：第一個影片不淡入
- [ ] 手動測試：第二個影片 1 秒淡入

**完成標準**: 批次模式轉場效果正確

---

## 📅 Phase 3: 音訊與參數（Day 6-8）

### 開發任務
- [ ] **3.1** 啟用 `_apply_fadein()` 的音訊淡入功能 (2-3h)
- [ ] **3.2** 新增 CLI 參數 `--fade-out-duration`, `--fade-in-duration`, `--no-audio-fadein` (1-2h)
- [ ] **3.3** 修改函式簽名支援自訂時長 (1h)
- [ ] **3.4** 建立 Phase 3 測試 `tests/test_transition_audio_fadein.py` (2-3h)

### 測試驗證
- [ ] Phase 3 測試全部通過
- [ ] 手動測試：音訊與畫面同步淡入
- [ ] 手動測試：自訂時長生效
- [ ] 手動測試：`--no-audio-fadein` 正常

**完成標準**: 音訊淡入與自訂參數正常運作

---

## 📝 文件更新

- [ ] **D1** 更新 `README.md` 轉場功能說明 (1h)
- [ ] **D2** 更新 `doc/TDD.md` 新增測試案例 (2h)
- [ ] **D3** 建立 `CHANGELOG.md` 記錄變更 (0.5h)

---

## ✅ 最終驗收

### 功能驗收
- [ ] 所有影片統一 3 秒淡出 ✓
- [ ] 批次模式第一個影片不淡入 ✓
- [ ] 批次模式後續影片 1 秒淡入 ✓
- [ ] 音訊與畫面同步淡出/淡入 ✓
- [ ] CLI 自訂參數正常運作 ✓
- [ ] `--no-audio-fadein` 旗標正常 ✓

### 測試驗收
- [ ] 單元測試覆蓋率 > 80%
- [ ] 整合測試通過
- [ ] E2E 手動測試通過
- [ ] CI 環境測試通過

### 文件驗收
- [ ] README.md 已更新
- [ ] TDD.md 已更新
- [ ] CHANGELOG.md 已建立
- [ ] 程式碼註解清晰

### 程式碼品質
- [ ] 所有函式有 docstring
- [ ] 型別註解完整
- [ ] 符合 PEP 8 風格
- [ ] 無明顯 code smell

---

## 🎯 關鍵決策提醒

根據 Andy Hsu 的決策（詳見決策文件）：

- **D1**: 單一影片也淡出（一致性優先）
- **D2**: 第一個影片不淡入（開頭影片短）
- **D4**: Phase 3 必須實作音訊淡入
- **D9**: 完整實作 Phase 1+2+3（6-8天）

---

## 📊 進度狀態

**Phase 1**: ⬜ 未開始 / 🟡 進行中 / ✅ 已完成  
**Phase 2**: ⬜ 未開始 / 🟡 進行中 / ✅ 已完成  
**Phase 3**: ⬜ 未開始 / 🟡 進行中 / ✅ 已完成  
**文件更新**: ⬜ 未開始 / 🟡 進行中 / ✅ 已完成

**當前階段**: _____________  
**預計完成日期**: _____________  
**實際完成日期**: _____________

---

## 🚨 阻塞問題

| 問題描述 | 影響階段 | 負責人 | 狀態 | 解決方案 |
|---------|---------|--------|------|---------|
| (範例) MoviePy 版本不相容 | Phase 1 | Dev | 🔴 阻塞 | 降級至 1.0.3 |
|         |         |        |      |         |

---

## 📞 需要協助

- [ ] 技術問題：________________
- [ ] 環境問題：________________
- [ ] 測試資源：________________

---

**最後更新**: __________  
**更新人**: __________

**完整計畫**: `.specify/implementation-plan-transitions.md`  
**決策文件**: `.specify/video-transition-effects-decisions.md`  
**規格文件**: `.specify/video-transition-effects.md`
